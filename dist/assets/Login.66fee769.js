import{_ as I,x as P,e as T,o as V,c as B,b as u,d as U,y as D,z as M,A as E,B as $,I as q,N as F,C as J,D as A,E as K,h as _,w as x,u as i,H as S,J as O,K as j,t as k,L as G,p as Q,i as X}from"./index.6f470236.js";import{l as Y,s as w,r as Z}from"./index.a9aaf449.js";const ee=""+new URL("logo.1e8c34ec.png",import.meta.url).href;const te={class:"s-canvas"},oe=["width","height"],ne={__name:"Identify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:35},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:200},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:120},contentHeight:{type:Number,default:40}},setup(h){const t=h,n=(e,o)=>Math.floor(Math.random()*(o-e)+e),s=(e,o)=>{let d=n(e,o),m=n(e,o),p=n(e,o);return"rgb("+d+","+m+","+p+")"},f=e=>{for(let o=0;o<3;o++)e.strokeStyle=s(t.lineColorMin,t.lineColorMax),e.beginPath(),e.moveTo(n(0,t.contentWidth),n(0,t.contentHeight)),e.lineTo(n(0,t.contentWidth),n(0,t.contentHeight)),e.stroke()},c=(e,o,d)=>{e.fillStyle=s(t.colorMin,t.colorMax),e.font=n(t.fontSizeMin,t.fontSizeMax)+"px SimHei";let m=(d+1)*(t.contentWidth/(t.identifyCode.length+1)),p=n(t.fontSizeMax,t.contentHeight-5);var v=n(-10,10);e.translate(m,p),e.rotate(v*Math.PI/100),e.fillText(o,0,0),e.rotate(-v*Math.PI/100),e.translate(-m,-p)},y=e=>{for(let o=0;o<30;o++)e.fillStyle=s(0,255),e.beginPath(),e.arc(n(0,t.contentWidth),n(0,t.contentHeight),1,0,2*Math.PI),e.fill()},g=()=>{let o=document.getElementById("s-canvas").getContext("2d");o.textBaseline="bottom",o.fillStyle=s(t.backgroundColorMin,t.backgroundColorMax),o.fillRect(0,0,t.contentWidth,t.contentHeight);for(let d=0;d<t.identifyCode.length;d++)c(o,t.identifyCode[d],d);f(o),y(o)};return P(()=>t.identifyCode,(e,o)=>{g()}),T(()=>{g()}),(e,o)=>(V(),B("div",te,[u("canvas",{id:"s-canvas",width:t.contentWidth,height:t.contentHeight},null,8,oe)]))}},le=I(ne,[["__scopeId","data-v-9a6eb64a"]]);const H=h=>(Q("data-v-fe91d769"),h=h(),X(),h),ae={class:"login"},se=H(()=>u("img",{src:ee,width:"100",class:"logo",alt:""},null,-1)),ie={class:"login-form"},de={style:{display:"flex",width:"100%","margin-top":"10px"}},re=H(()=>u("div",{class:"identify"},"\u9A8C\u8BC1\u7801",-1)),ue={style:{margin:"16px"}},ce={__name:"Login",setup(h){let t=U({username:"",password:"",isTitle:!0}),{username:n,password:s,isTitle:f}=D(t),c=M(""),y=M("\u767B\u5F55");E();let g=$(),e="1234567890",o=M("3212");const d=(a,l)=>Math.floor(Math.random()*(l-a)+a),m=(a,l)=>{for(let C=0;C<l;C++)o.value+=a[d(0,a.length)]},p=()=>{o.value="",m(e,4)};T(()=>{o.value="",m(e,4)});let v=()=>{o.value==c.value?f.value?Y(n.value,s.value).then(a=>{a.resultCode==200&&(localStorage.setItem("mlyxToken",JSON.stringify(a.data)),w({type:"success",message:"\u767B\u5F55\u6210\u529F\uFF01",duration:1e3}),setTimeout(()=>{g.replace("/home")},1e3))}):Z(n.value,s.value).then(a=>{if(a.resultCode==200){w({type:"success",message:a.message=="SUCCESS"?"\u6CE8\u518C\u6210\u529F":a.message});let l=n.value;setTimeout(()=>{t.isTitle=!0,b(),n.value=l},2e3)}}):w("\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF\uFF01\u8BF7\u91CD\u65B0\u8F93\u5165"),c.value="",p()},L=()=>{g.replace("/home")},b=()=>{f=!f,f?y.value="\u767B\u5F55":y.value="\u6CE8\u518C",n.value="",s.value="",c.value="",p()};return(a,l)=>{const C=q,z=F,N=J,R=A,W=K;return V(),B("div",ae,[u("header",null,[_(z,{title:i(y),"left-arrow":"",onClickLeft:i(L)},{right:x(()=>[_(C,{name:"ellipsis",size:"18"})]),_:1},8,["title","onClickLeft"])]),se,u("div",ie,[_(W,{onSubmit:i(v)},{default:x(()=>[_(N,{modelValue:i(n),"onUpdate:modelValue":l[0]||(l[0]=r=>S(n)?n.value=r:n=r),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7"}]},null,8,["modelValue"]),_(N,{modelValue:i(s),"onUpdate:modelValue":l[1]||(l[1]=r=>S(s)?s.value=r:s=r),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),u("div",de,[re,O(u("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":l[2]||(l[2]=r=>S(c)?c.value=r:c=r)},null,512),[[j,i(c)]]),u("div",{class:"code",onClick:p,style:{width:"112px"}},[_(le,{identifyCode:i(o)},null,8,["identifyCode"])])]),u("div",ue,[u("p",{class:"link-register",onClick:l[3]||(l[3]=(...r)=>i(b)&&i(b)(...r))},k(i(f)?"\u7ACB\u5373\u6CE8\u518C":"\u5DF2\u6709\u8D26\u53F7\uFF0C\u7ACB\u5373\u767B\u5F55"),1),_(R,{round:"",block:"",type:"primary","native-type":"submit"},{default:x(()=>[G(k(i(f)?"\u767B\u5F55":"\u6CE8\u518C"),1)]),_:1})])]),_:1},8,["onSubmit"])])])}}},me=I(ce,[["__scopeId","data-v-fe91d769"]]);export{me as default};
